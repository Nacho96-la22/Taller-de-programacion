{Bienvenidos al entorno CMRE.
Lo siguiente es un cÃ³digo de ejemplo que implementa un
proceso que recibe un nÃºmero de avenida como parÃ¡metro,
se posiciona en esa avenida y la recorre.}

programa ejemplo
procesos
  proceso terceraTarea
  comenzar
    mientras(HayPapelEnLaBolsa)
      depositarPapel
    mientras(HayFlorEnLaBolsa)
      depositarFlor
  fin
  proceso segundaTarea
  comenzar
    mientras(HayPapelEnLaEsquina)
      tomarPapel
  fin
  proceso primeraTarea
  comenzar
    mientras(HayFlorEnLaEsquina)
      tomarFlor
  fin
  proceso AtrabajarLaTarea(E tarea:numero)
  comenzar
    si(tarea = 1)
      primeraTarea
    sino
      si(tarea = 2)
        segundaTarea
      sino
        terceraTarea
  fin
areas
  jefeArea: AreaP(1,1,1,1)
  t1Area: AreaP(2,1,2,1)
  t2Area: AreaP(3,1,3,1)
  trabajdorArea: AreaPC (2,2,100,100)
robots
  robot trabajdor
  variables
    tarea,av,ca,actualAv,actualCa:numero
    bloqueo:boolean
  comenzar
    RecibirMensaje(tarea,j)
    actualAv:= PosAv
    actualCa:= PosCa
    mientras(tarea <> 4)
      RecibirMensaje(av,j)
      RecibirMensaje(ca,j)
      BloquearEsquina(av,ca)
      Pos(ca,av)
      AtrabajarLaTarea(tarea)
      Pos(actualAv,actualCa)
      LiberarEsquina(av,ca)
      RecibirMensaje(tarea,j)
  fin
  robot jefe
  variables
    tarea,av,ca:numero
    trabaja:numero
    trabajadorUnoActivo,trabajadorDosActivo:boolean
  comenzar
    trabajadorUnoActivo:= V
    trabajadorDosActivo:= V
    repetir 10
      si((trabajadorUnoActivo) & (trabajadorDosActivo))
        Random(trabaja,1,2)
      sino
        si((trabajadorUnoActivo) & ~(trabajadorDosActivo))
          trabaja:= 1
        sino
          trabaja:= 2
      Random(tarea,1,4)
      Random(av,2,100)
      Random(ca,2,100)
      si(trabaja = 1)
        EnviarMensaje(av,t1)
        EnviarMensaje(ca,t1)
        EnviarMensaje(tarea,t1)
        si(tarea = 4)
          trabajadorUnoActivo:= F
      sino
        si(trabaja = 2)
          EnviarMensaje(av,t2)
          EnviarMensaje(ca,t2)
          EnviarMensaje(tarea,t2)
          si(tarea = 4)
            trabajadorDosActivo:= F            
    si(trabajadorUnoActivo)
      EnviarMensaje(4,t1)
    si(trabajadorDosActivo)
      EnviarMensaje(4,t2)
  fin
variables
  t1: trabajdor
  t2: trabajdor
  j: jefe
comenzar
  AsignarArea(j, jefeArea)
  AsignarArea(t1, t1Area)
  AsignarArea(t2, t2Area)
  AsignarArea(t1, trabajdorArea)
  AsignarArea(t2, trabajdorArea)
  Iniciar(j, 1,1)
  Iniciar(t1,2,1)
  Iniciar(t2,3,1)
fin